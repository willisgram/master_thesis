colnames(points_players)[2] <- "points"
#Captain/vice captain
minutes_played_cap  <- inner_join(captain,minutes_round,by = "index") %>% select(
index,matches(paste0("round_",as.character(round))))
colnames(minutes_played_cap)[2] <- "min_played"
minutes_played_vice_cap  <- inner_join(vice_captain,minutes_round,by = "index") %>% select(
index,matches(paste0("round_",as.character(round))))
colnames(minutes_played_vice_cap)[2] <- "min_played"
if(minutes_played_cap$min_played != 0){
points_players$points <- if_else(condition = points_players$index == captain$index,
true = points_players$points*2,
false = points_players$points*1)
} else if(minutes_played_cap$min_played == 0 & minutes_played_vice_cap$min_played != 0){
points_players$points <- if_else(condition = points_players$index == vice_captain$index,
true = points_players$points*2,
false = points_players$points*1)
}
total_points <- sum(points_players$points)-ill_trans*4
return(total_points)
}
total_points(round = 7,final_team = final_team_7,captain = captain_7,vice_captain = vice_captain_7,ill_trans = 2,points_round = points_round_16,minutes_round = minutes_round_16)
for (i in 4:4) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
name_captain <- paste0("captain_",as.character(i+4))
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
assign(name_captain,captain_round)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
name_vice_captain <- paste0("vice_captain_",as.character(i+4))
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
assign(name_vice_captain,vice_captain_round)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
name_selected <- paste0("selected_",as.character(i+4))
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
assign(name_selected,selected_round)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#starting_round <- inner_join(points_round_16,starting_round,by = "index")
#starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
name_substitutes <- paste0("substitutes_",as.character(i+4))
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
assign(name_substitutes,substitutes_round)
}
final_team_8 <- final_team(round = 8,selected = selected_8,starting = starting_8,substitutes = substitutes_8,minutes_round = minutes_round_16)
final_team_8
final_team_7
final_team <- function(round,selected,starting,substitutes,minutes_round){
##Decide team
selected_team <- inner_join(selected, players, by = "index") %>% select(index,PositionsList)
starting_team <- inner_join(starting, players, by = "index") %>% select(index,PositionsList)
subs_team     <- inner_join(substitutes, players, by = "index") %>% select(index,PositionsList)
final_team    <- starting_team
minutes_played_starting <- inner_join(starting_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_starting)[3] <- "min_played"
minutes_played_selected <- inner_join(selected_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_selected)[3] <- "min_played"
minutes_played_subs     <- inner_join(subs_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_subs)[3] <- "min_played"
minutes_played_gk       <- minutes_played_starting %>% filter(PositionsList == "GLK")
minutes_played_gk_sub   <- minutes_played_selected %>% filter(PositionsList == "GLK" & index != minutes_played_gk$index)
final_team_gk           <- starting_team %>% filter(PositionsList == "GLK")
#Check GK
if(minutes_played_gk$min_played == 0 & minutes_played_gk_sub$min_played != 0){
final_team_gk <- minutes_played_gk_sub %>% select(index,PositionsList)
}
#Check outfield
minutes_played_starting_out <- minutes_played_starting %>% filter(PositionsList != "GLK")
final_team_out <- minutes_played_starting_out %>% select(index,PositionsList)
#Count formation
d <- minutes_played_starting_out %>% filter(PositionsList == "DEF")
d <- dim(d)[1]
m <- minutes_played_starting_out %>% filter(PositionsList == "MID")
m <- dim(m)[1]
a <- minutes_played_starting_out %>% filter(PositionsList == "FWD")
a <- dim(a)[1]
###Replace
#Create index keepers
not_playing_starting_index <-  which(minutes_played_starting_out$min_played == 0)
#playing_subs <-  minutes_played_subs %>% filter()
playing_subs_index <-  which(minutes_played_subs$min_played != 0)
if(length(not_playing_starting_index) != 0 & length(playing_subs_index) != 0){
for(j in 1:min(length(playing_subs_index),length(not_playing_starting_index))){
if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "DEF"){
d <- d+1
} else if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "MID"){
m <- m+1
} else if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "FWD"){
a <- a+1
}
if(3<=d & d<=5 & 3<=m & m<=5 & 1<=a & a<=3){
final_team_out[not_playing_starting_index[j],] <- subs_team[playing_subs_index[j],]
}
}
}
final_team <- rbind(final_team_gk,final_team_out) %>% arrange(
match(PositionsList, c("GLK","DEF","MID","FWD")),index
)
return(final_team)
}
final_team_8 <- final_team(round = 8,selected = selected_8,starting = starting_8,substitutes = substitutes_8,minutes_round = minutes_round_16)
final_team_8
final_team_7
inner_join(final_team_7,final_team_8,"index")
total_points(round = 8,final_team = final_team_8,captain = captain_8,vice_captain = vice_captain_8,ill_trans = 2,points_round = points_round_16,minutes_round = minutes_round_16)
for (i in 5:5) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
name_captain <- paste0("captain_",as.character(i+4))
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
assign(name_captain,captain_round)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
name_vice_captain <- paste0("vice_captain_",as.character(i+4))
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
assign(name_vice_captain,vice_captain_round)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
name_selected <- paste0("selected_",as.character(i+4))
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
assign(name_selected,selected_round)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#starting_round <- inner_join(points_round_16,starting_round,by = "index")
#starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
name_substitutes <- paste0("substitutes_",as.character(i+4))
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
assign(name_substitutes,substitutes_round)
}
final_team <- function(round,selected,starting,substitutes,minutes_round){
##Decide team
selected_team <- inner_join(selected, players, by = "index") %>% select(index,PositionsList)
starting_team <- inner_join(starting, players, by = "index") %>% select(index,PositionsList)
subs_team     <- inner_join(substitutes, players, by = "index") %>% select(index,PositionsList)
final_team    <- starting_team
minutes_played_starting <- inner_join(starting_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_starting)[3] <- "min_played"
minutes_played_selected <- inner_join(selected_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_selected)[3] <- "min_played"
minutes_played_subs     <- inner_join(subs_team,minutes_round,by = "index") %>% select(
index,PositionsList,matches(paste0("round_",as.character(round))))
colnames(minutes_played_subs)[3] <- "min_played"
minutes_played_gk       <- minutes_played_starting %>% filter(PositionsList == "GLK")
minutes_played_gk_sub   <- minutes_played_selected %>% filter(PositionsList == "GLK" & index != minutes_played_gk$index)
final_team_gk           <- starting_team %>% filter(PositionsList == "GLK")
#Check GK
if(minutes_played_gk$min_played == 0 & minutes_played_gk_sub$min_played != 0){
final_team_gk <- minutes_played_gk_sub %>% select(index,PositionsList)
}
#Check outfield
minutes_played_starting_out <- minutes_played_starting %>% filter(PositionsList != "GLK")
final_team_out <- minutes_played_starting_out %>% select(index,PositionsList)
#Count formation
d <- minutes_played_starting_out %>% filter(PositionsList == "DEF")
d <- dim(d)[1]
m <- minutes_played_starting_out %>% filter(PositionsList == "MID")
m <- dim(m)[1]
a <- minutes_played_starting_out %>% filter(PositionsList == "FWD")
a <- dim(a)[1]
###Replace
#Create index keepers
not_playing_starting_index <-  which(minutes_played_starting_out$min_played == 0)
#playing_subs <-  minutes_played_subs %>% filter()
playing_subs_index <-  which(minutes_played_subs$min_played != 0)
if(length(not_playing_starting_index) != 0 & length(playing_subs_index) != 0){
for(j in 1:min(length(playing_subs_index),length(not_playing_starting_index))){
if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "DEF"){
d <- d+1
} else if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "MID"){
m <- m+1
} else if(minutes_played_subs$PositionsList[playing_subs_index[j]] == "FWD"){
a <- a+1
}
if(3<=d & d<=5 & 3<=m & m<=5 & 1<=a & a<=3){
final_team_out[not_playing_starting_index[j],] <- subs_team[playing_subs_index[j],]
}
}
}
final_team <- rbind(final_team_gk,final_team_out) %>% arrange(
match(PositionsList, c("GLK","DEF","MID","FWD")),index
)
return(final_team)
}
total_points <- function(round,final_team,captain,vice_captain,ill_trans,points_round,minutes_round){
points_players <- inner_join(points_round,final_team,by = "index")
points_players <- points_players %>% select(index, matches(paste0("round_",as.character(round))))
colnames(points_players)[2] <- "points"
#Captain/vice captain
minutes_played_cap  <- inner_join(captain,minutes_round,by = "index") %>% select(
index,matches(paste0("round_",as.character(round))))
colnames(minutes_played_cap)[2] <- "min_played"
minutes_played_vice_cap  <- inner_join(vice_captain,minutes_round,by = "index") %>% select(
index,matches(paste0("round_",as.character(round))))
colnames(minutes_played_vice_cap)[2] <- "min_played"
if(minutes_played_cap$min_played != 0){
points_players$points <- if_else(condition = points_players$index == captain$index,
true = points_players$points*2,
false = points_players$points*1)
} else if(minutes_played_cap$min_played == 0 & minutes_played_vice_cap$min_played != 0){
points_players$points <- if_else(condition = points_players$index == vice_captain$index,
true = points_players$points*2,
false = points_players$points*1)
}
total_points <- sum(points_players$points)-ill_trans*4
return(total_points)
}
final_team_9 <- final_team(round = 9,selected = selected_9,starting = starting_9,substitutes = substitutes_9,minutes_round = minutes_round_16)
final_team_9
inner_join(final_team_8,final_team_9,"index")
total_points(round = 9,final_team = final_team_9,captain = captain_9,vice_captain = vice_captain_9,ill_trans = 6,points_round = points_round_16,minutes_round = minutes_round_16)
for (i in 6:6) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
name_captain <- paste0("captain_",as.character(i+4))
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
assign(name_captain,captain_round)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
name_vice_captain <- paste0("vice_captain_",as.character(i+4))
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
assign(name_vice_captain,vice_captain_round)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
name_selected <- paste0("selected_",as.character(i+4))
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
assign(name_selected,selected_round)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#starting_round <- inner_join(points_round_16,starting_round,by = "index")
#starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
name_substitutes <- paste0("substitutes_",as.character(i+4))
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
assign(name_substitutes,substitutes_round)
}
final_team_10 <- final_team(round = 10,selected = selected_10,starting = starting_10,substitutes = substitutes_10,minutes_round = minutes_round_16)
final_team_10
inner_join(final_team_9,final_team_10,"index")
total_points(round = 10,final_team = final_team_10,captain = captain_10,vice_captain = vice_captain_10,ill_trans = 6,points_round = points_round_16,minutes_round = minutes_round_16)
tot_10 <- total_points(round = 10,final_team = final_team_10,captain = captain_10,vice_captain = vice_captain_10,ill_trans = 6,points_round = points_round_16,minutes_round = minutes_round_16)
tot_10
tot_9 <- total_points(round = 9,final_team = final_team_9,captain = captain_9,vice_captain = vice_captain_9,ill_trans = 6,points_round = points_round_16,minutes_round = minutes_round_16)
tot_8 <- total_points(round = 8,final_team = final_team_8,captain = captain_8,vice_captain = vice_captain_8,ill_trans = 2,points_round = points_round_16,minutes_round = minutes_round_16)
tot_7 <- total_points(round = 7,final_team = final_team_7,captain = captain_7,vice_captain = vice_captain_7,ill_trans = 2,points_round = points_round_16,minutes_round = minutes_round_16)
inner_join(final_team_7,final_team_8,index)
inner_join(final_team_7,final_team_8,"index")
ill <- inner_join(final_team_9,final_team_10,"index")
ill <- inner_join(final_team_9,final_team_10,'index')
ill
dim(ill)
total_points_round <- data.frame(round = 8:10,points = rep(0,3))
total_points_round
total_points_round <- data.frame(round = 8:10,points = rep(0,3))
for (i in 4:4) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
round  <- i+4
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
#Vice captain
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
final_team_round <- final_team(round = round,selected = selected_round,starting = starting_round,
substitutes = substitutes_round,minutes_round = minutes_round_16)
if(i == 4){
ill_trans_round <- 0
} else{
ill_trans_round  <- max(0,10 - dim(inner_join(final_team_round,final_team_prev,'index'))[1])
}
total_points_round$points[i-3]  <- total_points(round = round,final_team = final_team_round,
captain = captain_round,
vice_captain = vice_captain_round,ill_trans = ill_trans_round,
points_round = points_round_16,minutes_round = minutes_round_16)
final_team_prev <- final_team_round
}
total_points_round
tot_8
tot_7
total_points_round <- data.frame(round = 8:10,points = rep(0,3))
for (i in 4:6) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
round  <- i+4
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
#Vice captain
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
final_team_round <- final_team(round = round,selected = selected_round,starting = starting_round,
substitutes = substitutes_round,minutes_round = minutes_round_16)
if(i == 4){
ill_trans_round <- 0
} else{
ill_trans_round  <- max(0,10 - dim(inner_join(final_team_round,final_team_prev,'index'))[1])
}
total_points_round$points[i-3]  <- total_points(round = round,final_team = final_team_round,
captain = captain_round,
vice_captain = vice_captain_round,ill_trans = ill_trans_round,
points_round = points_round_16,minutes_round = minutes_round_16)
final_team_prev <- final_team_round
}
total_points_round
tot_9
tot_10
tot_8
total_points(round = 8,final_team = final_team_8,captain = captain_8,vice_captain = vice_captain_8,ill_trans = 0,points_round = points_round_16,minutes_round = minutes_round_16)
total_points(round = 8,final_team = final_team_8,captain = captain_8,vice_captain = vice_captain_8,ill_trans = 2,points_round = points_round_16,minutes_round = minutes_round_16)
total_points_round <- data.frame(round = 8:12,points = rep(0,5))
for (i in 4:8) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
round  <- i+4
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
#Vice captain
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
final_team_round <- final_team(round = round,selected = selected_round,starting = starting_round,
substitutes = substitutes_round,minutes_round = minutes_round_16)
if(i == 4){
ill_trans_round <- 0
} else{
ill_trans_round  <- max(0,10 - dim(inner_join(final_team_round,final_team_prev,'index'))[1])
}
total_points_round$points[i-3]  <- total_points(round = round,final_team = final_team_round,
captain = captain_round,
vice_captain = vice_captain_round,ill_trans = ill_trans_round,
points_round = points_round_16,minutes_round = minutes_round_16)
final_team_prev <- final_team_round
}
total_points_round
mean(total_points_round$◘points)
mean(total_points_round$points)
total_points_round <- data.frame(round = 8:15,points = rep(0,8))
for (i in 4:11) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
round  <- i+4
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
colnames(captain)[1] <- "captain"
captain_round <- captain %>% mutate(index = as.integer(captain)) %>% select(index)
#Vice captain
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
colnames(vice_captain)[1] <- "vice_captain"
vice_captain_round <- vice_captain %>% mutate(index = as.integer(vice_captain)) %>% select(index)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
colnames(selected)[1] <- "selected"
selected_round <- selected %>% mutate(index = as.integer(selected)) %>% select(index)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
colnames(substitutes)[1] <- "substitutes"
substitutes_round <- substitutes %>% mutate(index = as.integer(substitutes)) %>% select(index)
final_team_round <- final_team(round = round,selected = selected_round,starting = starting_round,
substitutes = substitutes_round,minutes_round = minutes_round_16)
if(i == 4){
ill_trans_round <- 0
} else{
ill_trans_round  <- max(0,10 - dim(inner_join(final_team_round,final_team_prev,'index'))[1])
}
total_points_round$points[i-3]  <- total_points(round = round,final_team = final_team_round,
captain = captain_round,
vice_captain = vice_captain_round,ill_trans = ill_trans_round,
points_round = points_round_16,minutes_round = minutes_round_16)
final_team_prev <- final_team_round
}
total_points_round

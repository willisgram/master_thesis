substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
team <- inner_join(points_round_16,players_starting,by = "index")
assign(name_starting,team)
#assign(name_selected,selected)
}
View(starting_5)
View(starting_6)
View(starting_6)
rm(list = ls())
library(tidyverse)
options(stringsAsFactors = F)
#List after transfer window. Assume it to be enough
folder <- "input/"
year   <- "17"
week   <- "26"
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_26 <- read.csv(path)
players <- data_26 %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
players <- players %>% arrange(match(PositionsList, c("GLK","DEF","MID","FWD")),Team) %>% mutate(
index = 1:625
) %>% select(FirstName_1,Surname_1,PositionsList,Team,index)
######################
# Full 2016 data import
######################
#Points
###########
#Import training data
library(tidyverse)
options(stringsAsFactors = F)
folder <- "input/"
points_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,PointsLastRound) %>% arrange(index)
points_round_16 <- cbind(points_round_16,data_temp$PointsLastRound)
colnames(points_round_16)[i-3] <- paste0("round_",i)
}
#Opponents
opponent_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,NextFixture1) %>% arrange(index)
opponent_round_16 <- cbind(opponent_round_16,data_temp$NextFixture1)
colnames(opponent_round_16)[i-3] <- paste0("round_",i+1)
}
#Cost
cost_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,Cost) %>% arrange(index)
cost_round_16 <- cbind(cost_round_16,data_temp$Cost)
colnames(cost_round_16)[i-3] <- paste0("round_",i)
}
#Team
team_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,Team.x) %>% arrange(index)
team_round_16 <- cbind(team_round_16,data_temp$Team.x)
colnames(team_round_16)[i-3] <- paste0("round_",i)
}
#Position
pos_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,PositionsList.x) %>% arrange(index)
pos_round_16 <- cbind(pos_round_16,data_temp$PositionsList.x)
colnames(pos_round_16)[i-3] <- paste0("round_",i)
}
#Transfers in
trans_in_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,TransfersInRound) %>% arrange(index)
trans_in_round_16 <- cbind(trans_in_round_16,data_temp$TransfersInRound)
colnames(trans_in_round_16)[i-3] <- paste0("round_",i)
}
#Transfers out
trans_out_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,TransfersOutRound) %>% arrange(index)
trans_out_round_16 <- cbind(trans_out_round_16,data_temp$TransfersOutRound)
colnames(trans_out_round_16)[i-3] <- paste0("round_",i)
}
rm(list = c("data_26","data_temp"))
for (i in 1:1) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
starting_round <- inner_join(points_round_16,starting_round,by = "index")
starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
#players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#team <- inner_join(points_round_16,players_starting,by = "index")
#assign(name_starting,team)
#assign(name_selected,selected)
}
View(starting_5)
for (i in 1:3) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
starting_round <- inner_join(points_round_16,starting_round,by = "index")
starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
#players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#team <- inner_join(points_round_16,players_starting,by = "index")
#assign(name_starting,team)
#assign(name_selected,selected)
}
View(starting_6)
total_points <- 0
for (i in 1:3) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
starting_round <- inner_join(points_round_16,starting_round,by = "index")
starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
name_tot_points <- paste0("total_points_round_", as.character(i+4))
tot_points_round <- sum(starting_round[,2])
assign(name_tot_points,tot_points_round)
total_points <- total_points + sum(starting_round[,2])
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
#players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#team <- inner_join(points_round_16,players_starting,by = "index")
#assign(name_starting,team)
#assign(name_selected,selected)
}
tot_points_round <- data.frame()
rm(list = ls())
library(tidyverse)
options(stringsAsFactors = F)
#List after transfer window. Assume it to be enough
folder <- "input/"
year   <- "17"
week   <- "26"
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_26 <- read.csv(path)
players <- data_26 %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
players <- players %>% arrange(match(PositionsList, c("GLK","DEF","MID","FWD")),Team) %>% mutate(
index = 1:625
) %>% select(FirstName_1,Surname_1,PositionsList,Team,index)
######################
# Full 2016 data import
######################
#Points
###########
#Import training data
library(tidyverse)
options(stringsAsFactors = F)
folder <- "input/"
points_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,PointsLastRound) %>% arrange(index)
points_round_16 <- cbind(points_round_16,data_temp$PointsLastRound)
colnames(points_round_16)[i-3] <- paste0("round_",i)
}
#Opponents
opponent_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,NextFixture1) %>% arrange(index)
opponent_round_16 <- cbind(opponent_round_16,data_temp$NextFixture1)
colnames(opponent_round_16)[i-3] <- paste0("round_",i+1)
}
#Cost
cost_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,Cost) %>% arrange(index)
cost_round_16 <- cbind(cost_round_16,data_temp$Cost)
colnames(cost_round_16)[i-3] <- paste0("round_",i)
}
#Team
team_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,Team.x) %>% arrange(index)
team_round_16 <- cbind(team_round_16,data_temp$Team.x)
colnames(team_round_16)[i-3] <- paste0("round_",i)
}
#Position
pos_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,PositionsList.x) %>% arrange(index)
pos_round_16 <- cbind(pos_round_16,data_temp$PositionsList.x)
colnames(pos_round_16)[i-3] <- paste0("round_",i)
}
#Transfers in
trans_in_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,TransfersInRound) %>% arrange(index)
trans_in_round_16 <- cbind(trans_in_round_16,data_temp$TransfersInRound)
colnames(trans_in_round_16)[i-3] <- paste0("round_",i)
}
#Transfers out
trans_out_round_16 <- data.frame(index = 1:625)
for( i in 5:37){
year     <- "16"
week   <- as.character(i)
sheet  <- paste0("FPL",year,"-GW",week,".csv")
path   <- paste0(folder,sheet)
data_temp   <- read.csv(path)
data_temp <- data_temp %>% mutate(
Surname_1   = if_else(grepl(Surname,pattern = " "),sub('.* ', '', Surname),Surname),
FirstName_1 = if_else(grepl(Surname,pattern = " "),sub(' .*', '',Surname ), FirstName)
)
data_temp <- full_join(data_temp,players,by = c("FirstName_1" = "FirstName_1","Surname_1"="Surname_1"))
data_temp <- data_temp[!is.na(data_temp$index),]
data_temp <- data_temp %>% select(index,TransfersOutRound) %>% arrange(index)
trans_out_round_16 <- cbind(trans_out_round_16,data_temp$TransfersOutRound)
colnames(trans_out_round_16)[i-3] <- paste0("round_",i)
}
rm(list = c("data_26","data_temp"))
total_points <- 0
tot_points_round <- data.frame()
for (i in 1:3) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
starting_round <- inner_join(points_round_16,starting_round,by = "index")
starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
name_tot_points <- paste0("total_points_round_", as.character(i+4))
tot_points_round[1,i] <- sum(starting_round[,2])
colnames(tot_points_round)[i] <- paste0("round_",i+4)
total_points <- total_points + sum(starting_round[,2])
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
#players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#team <- inner_join(points_round_16,players_starting,by = "index")
#assign(name_starting,team)
#assign(name_selected,selected)
}
View(tot_points_round)
for (i in 1:10) {
path <- "../../../output/forecasting_method/"
method <- "regression/"
folder <- paste0("GW",i,"/")
#Captain
file_cap <- paste0(path,method,folder,"captain.csv")
captain <- read.csv(file_cap,header = F)
#Remaining budget
file_bud <- paste0(path,method,folder,"remaining_budget.csv")
budget <- read.csv(file_bud,header = F)
#Selected
file_sel <- paste0(path,method,folder,"selected.csv")
selected <- read.csv(file_sel,header = F)
#Starting
file_start <- paste0(path,method,folder,"starting.csv")
starting <- read.csv(file_start,header = F)
colnames(starting)[1] <- "starting"
name_starting <- paste0("starting_",as.character(i+4))
starting_round <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
starting_round <- inner_join(points_round_16,starting_round,by = "index")
starting_round <- starting_round %>% select(index, matches(paste0("round_",as.character(i+4))))
assign(name_starting,starting_round)
name_tot_points <- paste0("total_points_round_", as.character(i+4))
tot_points_round[1,i] <- sum(starting_round[,2])
colnames(tot_points_round)[i] <- paste0("round_",i+4)
total_points <- total_points + sum(starting_round[,2])
#Substitutes
file_sub <- paste0(path,method,folder,"substitutes.csv")
substitutes <- read.csv(file_sub,header = F)
#Vice captain
#Starting
file_vice <- paste0(path,method,folder,"vice_captain.csv")
vice_captain <- read.csv(file_vice,header = F)
#name_selected <- paste0("selected_",as.character(i+4))
#players_starting <- starting %>% mutate(index = as.integer(starting)) %>% select(index)
#team <- inner_join(points_round_16,players_starting,by = "index")
#assign(name_starting,team)
#assign(name_selected,selected)
}
